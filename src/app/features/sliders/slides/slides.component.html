<div class="flex justify-end px-4 py-2">
  <button nz-button nzType="primary" (click)="isNewSlideVisible.set(true)">
    افزودن
  </button>
</div>
<nz-table
  #basicTable
  [nzData]="slides()"
  class="p-2"
  nzShowSizeChanger
  [nzLoading]="pending()"
  (nzPageSizeChange)="onPageSizeChange($event)"
  [nzPageSize]="pageSize()"
  [nzPageIndex]="pageIndex()"
  [nzTotal]="totalNumber()"
>
  <thead>
    <tr>
      <th></th>
      <th>تصویر</th>
      <th>عنوان</th>
      <th>زمان شروع</th>
      <th>زمان پایان</th>
      <th>وضعیت</th>
      <th>اولویت</th>
      <th>عملیات</th>
    </tr>
  </thead>
  <tbody>
    @for (data of basicTable.data; track data) {
    <tr>
      <td>{{ data.id }}</td>
      <td>
        <img width="150" [src]="data.pictureId | imageURLResolver" alt="" />
      </td>
      <td>{{ data.title }}</td>
      <td>{{ data.showStartDatePersian }}</td>
      <td>{{ data.endDatePersian }}</td>
      <td>{{ data.enabled ? "فعال" : "غیرفعال" }}</td>
      <td>{{ data.priority }}</td>
      <td>
        <button class="px-2" (click)="edit(data)">
          <nz-icon nzType="edit" nzTheme="outline"></nz-icon>
        </button>
        <button class="px-2" (click)="delete(data.id!)">
          <nz-icon nzType="delete" nzTheme="outline"></nz-icon>
        </button>
      </td>
    </tr>
    }
  </tbody>
</nz-table>

<nz-modal
  [nzFooter]="null"
  [nzVisible]="isNewSlideVisible()"
  (nzVisibleChange)="isNewSlideVisible.set($event)"
  (nzOnCancel)="isNewSlideVisible.set(false)"
>
  <ng-container *nzModalContent>
    <shop-new-slide
      [sliderId]="sliderId"
      (close)="isNewSlideVisible.set(false); GetList()"
    ></shop-new-slide>
  </ng-container>
</nz-modal>
<nz-modal
  [nzFooter]="null"
  [nzVisible]="EditSlideVisible()"
  (nzVisibleChange)="EditSlideVisible.set($event)"
  (nzOnCancel)="EditSlideVisible.set(false)"
>
  <ng-container *nzModalContent>
    <shop-edit-slide
      [slide]="slide"
      (close)="EditSlideVisible.set(false); GetList()"
    ></shop-edit-slide>
  </ng-container>
</nz-modal>
